

# 03. 스토리지, 대용량 고속 저장 장치

## Stroage 의 구조와 분류
### 1) 구성요소?
 - 디스크 + 컨트롤러 + 캐시 + 채널

### 2) 가용성과 연결 방식에 따른 구분
 - 성능, 확장성, 가용성, 복제기술 등 등급으로 구분했을때.. => 엔트리/미드레인지/하이엔드
 - 구성방식으로 구분했을때.. => DAS, SAN, NAS
     - DAS
     - SAN
     - NAS

### 3) 시장을 주도하는 스토리지 업체와 제품군
 - EMC, Netapp, HDS, HP, IBM, 화훼이..
 - Server 와 동일하게 모델명 숫자가 클수록 성능이 좋음
 - 데이터 크기가 증가할때 스토리지 성능이 중요해짐 하지만 스토리지는 상대적으로 고가
 - 또 어떤 업무에 어떤 성능이 요구되는지 판단하기는 상당한 경험이 필요함
 - 최근에는 SW로 서버들을 Clustering 해서 하나의 스토리지로 기능 구현하는 `SDS(Software Defined Stroage)` 개념이 나오고 있음

## Stroage 를 도입하기까지..

### 1) 선택시 고려사항
 - 스토리지는 고가. 서버는 벤더사에서 보유하고 있는 CPU별 tpmC 등의 자료를 통해 수용가능용량, 예상성능을 가늠할 수 있으나 스토리지는 구입기준을 정하기가 어려운 점이 있음. (부품다양 보유솔루션 다양.)
 - 때문에 원하는 이용목적에 맞게 활용할 수 있는 수준 가이드라인 필요
```
예산, 성능, 확장성, 호환성, 가용성, 활용성 등이 기준이 될 수 있음.. -> 물리적 성능 (IOPS, Stroage Controller 의 처리대역폭, 캐시용량..), Server-Storage 간 접속 포트수 (디스크 장착 갯수, 최대 용량 인터페이스 종류별 호스트..), 무중단요소(RAID 구성, 부품 이중화, 캐시 미러링..), 복제/백업 스토리지 자체 지원 솔루션등..
```
### 2) 비교검증 방법
 - 초당처리속도(IOPS, Input/output Operations Per Secound): 단위블록별처리 - Iometer, Vdbench ..
 - 초당전송량(MB/s): 단위시간동안처리 - Vdbench ..


## Stroage 를 Stroage 답게 만드는 기술들

### 1) 데이터 접근 가용성과 속도를 향상시키는 RAID
 - RAID 0~6
 - 미러링 : 동일 데이터 2 DISK 복제저장 (RIAD1)
 - 스트라이핑 : 데이터 N DISK 로 분산저장 (RAID0)
    - 읽기성능 우수
    - 단, 1DISK 라도 파손되었을 경우, 데이터 인식 불가.
    - 이를 위해 복구 패리티 연산을 이용해 보완하는 RAID5 기법 존재.
 - 핫 스페어 : 여분 DISK. 고장시 핫 스페어가 RAID 그룹에 들어가 활성화, 고장 DISK 는 리빌딩(rebuilding) 수행
    - 보통은 `RAID5 + 핫스페어` 로 구성

### 2) 안정성&기능성을 위한 데이터 복제
 - 대부분의 복제솔루션은 `내외부복제 + 스냅샷` 으로 구성
    - 내부 : 동일 스토리지 내 복제, 외부 : 타 스토리지로 복제
    - 동기/비동기 : 대부분 비동기 사용  
 - 라이센스 : 내/외부 복제용 라이센스, 용량기반 라이선싱, 스토리지 기반 라이선싱..
 - full copy.. (요즘은 1Time/20TB, 초당 5.7GB)

### 3) 비용효율적인 스냅샷
 - 원본데이터를 가리키는 주소값만을 보유한 `포인터와 변경이력만 관리` 하는 복제방법
 - 생성속도 빠름, full 에 비해 성능은 떨어지지만(원본계속참조) 용량 이점
 - 논리보호 O, 물리보호 X

### 4) 가성비를 추구하는 씬 프로비저닝, 오토티어링




## 스펙과 성능지표로 Stroage 분석하기

## Stroage 설계시 고려사항
